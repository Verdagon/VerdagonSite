<!DOCTYPE html><html><head><meta charset="UTF-8"><title>Zero-Cost References with Regions [Vale] Comments</title><style>
    .comment {
      overflow: hidden;
      padding: 18px 0 7px 0;
      clear: both;
    }

    .comment + .comment {
      border-top: 1px solid #e8e8e8;
    }

    .comment > .json {
      display: none;
    }

    .comment-box {
      background-color: #fffbe1;
      overflow: hidden;
      padding: 6px 12px;
      margin-bottom: 8px;
    }

    .reply-box {
      background-color: #eff2f9;
      padding: 6px 12px 6px 6px;
      overflow: hidden;
      margin-bottom: 8px;
    }

    .user-name {
      font-weight: bold;
      padding-right: 10px;
    }

    .comment > .author-picture {
      float: left;
      padding: 0 20px;
    }

    .reply-box > .author-picture {
      float: left;
      padding: 0 6px;
    }

    .comment-deleted {
      color: red;
      padding-right: 10px;
    }

    .author-picture + div, .user-name, .user-name + .comment-deleted, .user-name + .comment-action {
      float: left;
    }

    .created-date {
      color: #999;
    }

    .comment-box .comment-content {
      clear: both;
    }

    .comment-box > .created-date {
      float: right;
    }

    .reply-box .created-date {
      clear: both;
    }

    .comment-context-intro {
      color: #999;
      clear: both;
    }

    .comment-context-value {
      border-left: 1px solid #ccc;
      font-style: italic;
      padding: 3px 10px 3px 10px;
    }

    .comment-action {
      font-style: italic;
    }

    .comment-status {
      font-style: italic;
      color: green;
      float: left;
      font-weight: bold;
      padding-right: 10px;
    }
  </style></head><body><section class="header"><h1>Zero-Cost References with Regions [Vale] - Drive File Comments</h1></section><section><div id="AAAAKAu4UqI" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GhbdCnIbPSkBEh__rJaPZk3wuyBKV16-xMCg0Jc6Q=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Ilya Seletsky</div><div class="comment-status">Resolved</div><div class="created-date">Jul 22, 2020, 4:56 PM(edited: Jul 22, 2020, 5:39 PM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">Swift</div></div><div class="comment-content">Could add Objective C, C++ Smart Pointers to the list?</div></div><div class="reply-list"><div id="AAAAKAu4UqU" class="reply-box"><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="24" height="24" alt="Author profile image"></div><div class="reply-data"><div class="user-name">Evan Ovadia</div><div class="comment-action">Marked as resolved</div><div class="comment-content"></div><div class="created-date">Jul 22, 2020, 5:39 PM</div></div></div></div></div></div><div id="AAAAKAoTboM" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jul 22, 2020, 6:45 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">!</div></div><div class="comment-content">(maybe move this to a note)</div></div><div class="reply-list"></div></div></div><div id="AAAAKAoHvUo" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jul 22, 2020, 1:30 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">e</div></div><div class="comment-content">Similar to Rust</div></div><div class="reply-list"></div></div></div><div id="AAAAKAoHvUU" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jul 22, 2020, 1:27 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">.</div></div><div class="comment-content">Read more at <a href="https://www.google.com/url?q=https://aardappel.github.io/lobster/memory_management.html&amp;sa=D&amp;source=docs&amp;ust=1653194620404739&amp;usg=AOvVaw1z_guSH3tZgoaNh6A_TY4_" data-rawhref="https://aardappel.github.io/lobster/memory_management.html" target="_blank">https://aardappel.github.io/lobster/memory_management.html</a></div></div><div class="reply-list"></div></div></div><div id="AAAAKAoHvTg" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jul 22, 2020, 1:08 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">.</div></div><div class="comment-content">We had plenty of off-by-one errors when implementing RC.</div></div><div class="reply-list"></div></div></div><div id="AAAAKAoHvTU" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status">Resolved</div><div class="created-date">Jul 22, 2020, 12:54 AM(edited: Jul 22, 2020, 1:27 AM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">Lobster</div></div><div class="comment-content">link</div></div><div class="reply-list"><div id="AAAAKAoHvUQ" class="reply-box"><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="24" height="24" alt="Author profile image"></div><div class="reply-data"><div class="user-name">Evan Ovadia</div><div class="comment-action">Marked as resolved</div><div class="comment-content"></div><div class="created-date">Jul 22, 2020, 1:27 AM</div></div></div></div></div></div><div id="AAAAKAoHvTI" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status">Resolved</div><div class="created-date">Jul 22, 2020, 12:30 AM(edited: Jul 22, 2020, 12:53 AM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">Lobster?</div></div><div class="comment-content">Get wouter&#39;s input on what we should put here</div></div><div class="reply-list"><div id="AAAAKAoHvTQ" class="reply-box"><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="24" height="24" alt="Author profile image"></div><div class="reply-data"><div class="user-name">Evan Ovadia</div><div class="comment-action">Marked as resolved</div><div class="comment-content"></div><div class="created-date">Jul 22, 2020, 12:53 AM</div></div></div></div></div></div><div id="AAAAKAoHvS8" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status">Resolved</div><div class="created-date">Jul 22, 2020, 12:03 AM(edited: Jul 22, 2020, 12:10 AM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">.</div></div><div class="comment-content">Fun fact: the pool allocator is built on top of the arena allocator, under the hood.</div></div><div class="reply-list"><div id="AAAAKAoHvTA" class="reply-box"><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="24" height="24" alt="Author profile image"></div><div class="reply-data"><div class="user-name">Evan Ovadia</div><div class="comment-action">Marked as resolved</div><div class="comment-content"></div><div class="created-date">Jul 22, 2020, 12:10 AM</div></div></div></div></div></div><div id="AAAAKAoHvS4" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jul 21, 2020, 11:52 PM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">of the same type</div></div><div class="comment-content">Type-specific pools are 100% safe with no ref-counting overhead, because use-after-free doesn&#39;t actually use a <i>freed</i> object, it uses one that&#39;s still alive in memory, and of the correct structure.</div></div><div class="reply-list"></div></div></div><div id="AAAAJuhGSqY" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status">Resolved</div><div class="created-date">Jun 28, 2020, 5:26 AM(edited: Jul 22, 2020, 1:34 AM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">.</div></div><div class="comment-content">and completely avoided malloc and free overhead</div></div><div class="reply-list"><div id="AAAAKAoHvU4" class="reply-box"><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="24" height="24" alt="Author profile image"></div><div class="reply-data"><div class="user-name">Evan Ovadia</div><div class="comment-action">Marked as resolved</div><div class="comment-content"></div><div class="created-date">Jul 22, 2020, 1:34 AM</div></div></div></div></div></div><div id="AAAAJuhGSqU" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 28, 2020, 5:23 AM(edited: Jul 24, 2020, 5:13 PM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">A</div></div><div class="comment-content">explain why 2x<br><br>It uses 1x if we initialize it to the correct size.</div></div><div class="reply-list"></div></div></div><div id="AAAAJuhGSqQ" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status">Resolved</div><div class="created-date">Jun 28, 2020, 5:20 AM(edited: Jul 22, 2020, 1:34 AM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">.</div></div><div class="comment-content">mention prediction</div></div><div class="reply-list"><div id="AAAAKAoHvU0" class="reply-box"><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="24" height="24" alt="Author profile image"></div><div class="reply-data"><div class="user-name">Evan Ovadia</div><div class="comment-action">Marked as resolved</div><div class="comment-content"></div><div class="created-date">Jul 22, 2020, 1:34 AM</div></div></div></div></div></div><div id="AAAAJuhGSqM" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status">Resolved</div><div class="created-date">Jun 28, 2020, 5:18 AM(edited: Jul 22, 2020, 1:32 AM)</div><div class="comment-content">say return type</div></div><div class="reply-list"><div id="AAAAKAoHvUw" class="reply-box"><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="24" height="24" alt="Author profile image"></div><div class="reply-data"><div class="user-name">Evan Ovadia</div><div class="comment-action">Marked as resolved</div><div class="comment-content"></div><div class="created-date">Jul 22, 2020, 1:32 AM</div></div></div></div></div></div><div id="AAAAJuhGSqE" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status">Resolved</div><div class="created-date">Jun 28, 2020, 5:10 AM(edited: Jul 22, 2020, 1:31 AM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">references</div></div><div class="comment-content">ref counting</div></div><div class="reply-list"><div id="AAAAKAoHvUs" class="reply-box"><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="24" height="24" alt="Author profile image"></div><div class="reply-data"><div class="user-name">Evan Ovadia</div><div class="comment-action">Marked as resolved</div><div class="comment-content"></div><div class="created-date">Jul 22, 2020, 1:31 AM</div></div></div></div></div></div><div id="AAAAJuhGSqA" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status">Resolved</div><div class="created-date">Jun 28, 2020, 5:05 AM(edited: Jul 22, 2020, 1:28 AM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">atomic</div></div><div class="comment-content">and thats slow</div></div><div class="reply-list"><div id="AAAAKAoHvUY" class="reply-box"><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="24" height="24" alt="Author profile image"></div><div class="reply-data"><div class="user-name">Evan Ovadia</div><div class="comment-action">Marked as resolved</div><div class="comment-content"></div><div class="created-date">Jul 22, 2020, 1:28 AM</div></div></div></div></div></div><div id="AAAAJudpTvQ" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 27, 2020, 6:52 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">.</div></div><div class="comment-content">One could say that we&#39;re only doing the reference counting we need to, for the result of the function.</div></div><div class="reply-list"></div></div></div><div id="AAAAJudpTvI" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 27, 2020, 6:40 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">List</div></div><div class="comment-content">In Vale, List is backed by an array. If one wants a linked list, they can use LinkedList.</div></div><div class="reply-list"></div></div></div><div id="AAAAJudpTvE" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 27, 2020, 6:29 AM(edited: Jun 27, 2020, 6:39 AM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">n</div></div><div class="comment-content">To save on memory, one can bump-call even from within a bump-call. It will blast away all the memory from the inner call.</div></div><div class="reply-list"></div></div></div><div id="AAAAJuLfcGc" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 27, 2020, 6:11 AM</div><div class="comment-content">We could add other interesting techniques from the garbage collection world on an opt-in basis. Languages like Cone are making great strides in this area.</div></div><div class="reply-list"></div></div></div><div id="AAAAJuLfcGY" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 27, 2020, 6:11 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">c</div></div><div class="comment-content">Garbage collectors also do <b>compaction</b>, where they take a bunch of objects with awkward unused spaces between them, and put them all next to each other in memory. Vale does this whenever we move objects into a bump region, so we can compact memory by moving from one bump allocated region into another. We can also partially do this when a bump-call does another bump-call of its own.</div></div><div class="reply-list"></div></div></div><div id="AAAAJuLfcGU" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 27, 2020, 5:50 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">.</div></div><div class="comment-content">If you&#39;re curious, the six sages are named Scout, Seer, Astronomer, Templar, Hammer, and Midas.</div></div><div class="reply-list"></div></div></div><div id="AAAAJuLfcGQ" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status">Resolved</div><div class="created-date">Jun 27, 2020, 5:29 AM(edited: Jul 22, 2020, 1:30 AM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">e</div></div><div class="comment-content">Some regions can be &quot;isolated&quot; in Vale. Not all regions are isolated, as we&#39;ll see below.</div></div><div class="reply-list"><div id="AAAAKAoHvUk" class="reply-box"><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="24" height="24" alt="Author profile image"></div><div class="reply-data"><div class="user-name">Evan Ovadia</div><div class="comment-action">Marked as resolved</div><div class="comment-content"></div><div class="created-date">Jul 22, 2020, 1:30 AM</div></div></div></div></div></div><div id="AAAAJuLfcGM" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 27, 2020, 5:20 AM(edited: Jul 22, 2020, 12:26 AM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">.</div></div><div class="comment-content">Commonly in some very small circles, that is.</div></div><div class="reply-list"></div></div></div><div id="AAAAJuLfcGE" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 27, 2020, 4:56 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">&amp;gt;</div></div><div class="comment-content">We could take these annotations out and the program would still work, but it wouldn&#39;t be as fast as it is here.</div></div><div class="reply-list"></div></div></div><div id="AAAAJuLfcGA" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 27, 2020, 4:52 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">.</div></div><div class="comment-content">Functional programming takes this to the extreme by making <i>every</i> function do this.</div></div><div class="reply-list"></div></div></div><div id="AAAAJuLfcF8" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status">Resolved</div><div class="created-date">Jun 27, 2020, 4:45 AM(edited: Jul 22, 2020, 1:30 AM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">.</div></div><div class="comment-content">Lobster is pioneering reference counting optimizations like this; it can eliminate ~95% of reference counts.</div></div><div class="reply-list"><div id="AAAAKAoHvUg" class="reply-box"><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="24" height="24" alt="Author profile image"></div><div class="reply-data"><div class="user-name">Evan Ovadia</div><div class="comment-action">Marked as resolved</div><div class="comment-content"></div><div class="created-date">Jul 22, 2020, 1:30 AM</div></div></div></div></div></div><div id="AAAAJuLfcF4" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status">Resolved</div><div class="created-date">Jun 27, 2020, 4:43 AM(edited: Jul 22, 2020, 1:29 AM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">.</div></div><div class="comment-content">Lobster also does this.<br><br>Cyclone and Rust do something like this, but for every object, rather than for an entire region.</div></div><div class="reply-list"><div id="AAAAKAoHvUc" class="reply-box"><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="24" height="24" alt="Author profile image"></div><div class="reply-data"><div class="user-name">Evan Ovadia</div><div class="comment-action">Marked as resolved</div><div class="comment-content"></div><div class="created-date">Jul 22, 2020, 1:29 AM</div></div></div></div></div></div><div id="AAAAJuLfcF0" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 27, 2020, 4:39 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">.</div></div><div class="comment-content">See <a href="https://www.google.com/url?q=https://benchmarksgame-team.pages.debian.net/benchmarksgame/fastest/swift-gcc.html&amp;sa=D&amp;source=docs&amp;ust=1653194620378106&amp;usg=AOvVaw0tm1i9GDNS1N7ajuvunqRI" data-rawhref="https://benchmarksgame-team.pages.debian.net/benchmarksgame/fastest/swift-gcc.html" target="_blank">https://benchmarksgame-team.pages.debian.net/benchmarksgame/fastest/swift-gcc.html</a></div></div><div class="reply-list"></div></div></div><div id="AAAAJuLfcFw" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 27, 2020, 4:30 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">.</div></div><div class="comment-content">This can be a constraint reference count or a weak reference count, depending on the reference.</div></div><div class="reply-list"></div></div></div><div id="AAAAJuLfcEs" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 27, 2020, 4:15 AM(edited: Jun 27, 2020, 5:33 AM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">RC + Vec costs</div></div><div class="comment-content">See <a href="https://www.google.com/url?q=https://vale.dev/blog/raii-next-steps&amp;sa=D&amp;source=docs&amp;ust=1653194620377561&amp;usg=AOvVaw3GgeTixjrxWom5Zs7PytJK" data-rawhref="https://vale.dev/blog/raii-next-steps" target="_blank">https://vale.dev/blog/raii-next-steps</a>.</div></div><div class="reply-list"></div></div></div><div id="AAAAJzgsLCc" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 26, 2020, 4:49 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">and lobster technique</div></div><div class="comment-content">verify</div></div><div class="reply-list"></div></div></div><div id="AAAAJzgsLCY" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 26, 2020, 4:46 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">, and the lobster optimization</div></div><div class="comment-content">verify</div></div><div class="reply-list"></div></div></div><div id="AAAAJzgsLCU" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 26, 2020, 4:45 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">.</div></div><div class="comment-content">or into mutexes regions?</div></div><div class="reply-list"></div></div></div><div id="AAAAJzgsLCI" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 26, 2020, 4:33 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">.</div></div><div class="comment-content">Or possibly into itself, pretty easily.</div></div><div class="reply-list"></div></div></div><div id="AAAAJzgsLCE" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 26, 2020, 4:29 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">.</div></div><div class="comment-content">It&#39;s also likely that the return object is hot in the cache.</div></div><div class="reply-list"></div></div></div><div id="AAAAJzgsLCA" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 26, 2020, 4:23 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">.</div></div><div class="comment-content">This is a great for programming styles that rely on purely immutable objects, where we create a new object every time we want to modify an existing one.</div></div><div class="reply-list"></div></div></div><div id="AAAAJzgsLB8" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status">Resolved</div><div class="created-date">Jun 26, 2020, 4:11 AM(edited: Jun 26, 2020, 4:38 AM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">:</div></div><div class="comment-content">Even if we move garbage collection to another thread, we&#39;re still using a lot of CPU for it, CPU which could have been used for OS operations, or another thread in your application. It also drains power, <br><br>We&#39;ve tried for years to reduce the pause time. Go has brought it down to 1ms, at the cost of throughput (see <a href="https://www.google.com/url?q=https://medium.com/servicetitan-engineering/go-vs-c-part-2-garbage-collection-9384677f86f1&amp;sa=D&amp;source=docs&amp;ust=1653194620395929&amp;usg=AOvVaw2luxU1P0Dqw5lIPxk1GnrW" data-rawhref="https://medium.com/servicetitan-engineering/go-vs-c-part-2-garbage-collection-9384677f86f1" target="_blank">https://medium.com/servicetitan-engineering/go-vs-c-part-2-garbage-collection-9384677f86f1</a>)<br><br>However, even a 1ms  that&#39;s still an entire 8% of a 60fps game&#39;s CPU budget.</div></div><div class="reply-list"><div id="AAAAJzgsLCQ" class="reply-box"><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="24" height="24" alt="Author profile image"></div><div class="reply-data"><div class="user-name">Evan Ovadia</div><div class="comment-action">Marked as resolved</div><div class="comment-content"></div><div class="created-date">Jun 26, 2020, 4:38 AM</div></div></div></div></div></div><div id="AAAAJzgsLB4" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 26, 2020, 3:42 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">blah, blah</div></div><div class="comment-content">Find others</div></div><div class="reply-list"></div></div></div><div id="AAAAJzgsLB0" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status">Resolved</div><div class="created-date">Jun 26, 2020, 3:36 AM(edited: Jun 27, 2020, 6:40 AM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">f</div></div><div class="comment-content">Talk about drop vs free here perhaps</div></div><div class="reply-list"><div id="AAAAJzgsLCM" class="reply-box"><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="24" height="24" alt="Author profile image"></div><div class="reply-data"><div class="user-name">Evan Ovadia</div><div class="comment-content">Actually, we probably still need to set the live bit to false... so no point in drop vs free.</div><div class="created-date">Jun 26, 2020, 4:36 AM</div></div></div><div id="AAAAJudpTvM" class="reply-box"><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="24" height="24" alt="Author profile image"></div><div class="reply-data"><div class="user-name">Evan Ovadia</div><div class="comment-action">Marked as resolved</div><div class="comment-content"></div><div class="created-date">Jun 27, 2020, 6:40 AM</div></div></div></div></div></div><div id="AAAAJzgsLBg" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 26, 2020, 3:11 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">l</div></div><div class="comment-content">This is an approach also being explored by Basil, a new stack-based language, check out their article here: <a href="https://www.google.com/url?q=https://degaz.io/blog/632020/post.html&amp;sa=D&amp;source=docs&amp;ust=1653194620398303&amp;usg=AOvVaw3RC80ehaHDfoxXcZ9iN6qa" data-rawhref="https://degaz.io/blog/632020/post.html" target="_blank">https://degaz.io/blog/632020/post.html</a></div></div><div class="reply-list"></div></div></div><div id="AAAAJzgsLBc" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 26, 2020, 3:10 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">.</div></div><div class="comment-content">rephrase</div></div><div class="reply-list"></div></div></div><div id="AAAAJzgsLBA" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 26, 2020, 2:54 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">.</div></div><div class="comment-content">This only applies to objects that would have been on the heap; any objects we put on the stack will still use the stack.</div></div><div class="reply-list"></div></div></div><div id="AAAAJzgsLA8" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 26, 2020, 2:54 AM(edited: Jun 26, 2020, 3:13 AM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">g</div></div><div class="comment-content">One should be careful and know exactly how much they&#39;re allocating in a bump-allocated function. Gratuitous use of `inl` can also help.</div></div><div class="reply-list"><div id="AAAAJzgsLBk" class="reply-box"><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="24" height="24" alt="Author profile image"></div><div class="reply-data"><div class="user-name">Evan Ovadia</div><div class="comment-content">We can also annotate the function with a maximum size, and it will assert that we don&#39;t exceed that size (in debug mode).</div><div class="created-date">Jun 26, 2020, 3:13 AM</div></div></div></div></div></div><div id="AAAAJzgsLA4" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 26, 2020, 2:52 AM(edited: Jul 22, 2020, 12:09 AM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">.</div></div><div class="comment-content">One could say that we&#39;re only paying the RC cost for the things we actually return from the function.</div></div><div class="reply-list"></div></div></div><div id="AAAAJzgsLA0" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 26, 2020, 2:51 AM(edited: Jun 26, 2020, 3:34 AM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">.</div></div><div class="comment-content">We could have a mode such that, whenever we compile a bump-allocated function, we also compile a backup, and if we run out of memory, we completely abort the current call and go with the backup version.</div></div><div class="reply-list"><div id="AAAAJzgsLBw" class="reply-box"><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="24" height="24" alt="Author profile image"></div><div class="reply-data"><div class="user-name">Evan Ovadia</div><div class="comment-content">Perhaps we can have something where we allocate a <i>ton</i> of memory, and then check at the end of every bump call whether we want to compact its results, or just continue on our merry way. Maybe we can guess this based on how far into the heap we are, and how much space we have left.</div><div class="created-date">Jun 26, 2020, 3:34 AM</div></div></div></div></div></div><div id="AAAAJzgsLAw" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 26, 2020, 2:43 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">.</div></div><div class="comment-content">This is safe because the memory is not reclaimed by anyone else, we&#39;re just accessing old data, which isn&#39;t a memory safety problem (just a logic problem).</div></div><div class="reply-list"></div></div></div><div id="AAAAJzgsLAs" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status">Resolved</div><div class="created-date">Jun 26, 2020, 2:31 AM(edited: Jul 24, 2020, 5:13 PM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">,</div></div><div class="comment-content">It uses 1x if we initialize it to the correct size.</div></div><div class="reply-list"><div id="AAAAGv73R_s" class="reply-box"><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="24" height="24" alt="Author profile image"></div><div class="reply-data"><div class="user-name">Evan Ovadia</div><div class="comment-action">Marked as resolved</div><div class="comment-content"></div><div class="created-date">Jul 24, 2020, 5:13 PM</div></div></div></div></div></div><div id="AAAAJzgsLAo" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 26, 2020, 2:31 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">t</div></div><div class="comment-content">HashSet and Queue are both backed by List, so in this function, we basically have four Lists.</div></div><div class="reply-list"></div></div></div><div id="AAAAJzgsLAg" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status">Resolved</div><div class="created-date">Jun 26, 2020, 2:09 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">.</div></div><div class="comment-content">Perhaps custom allocators? Is that crazy?</div></div><div class="reply-list"><div id="AAAAJzgsLAk" class="reply-box"><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="24" height="24" alt="Author profile image"></div><div class="reply-data"><div class="user-name">Evan Ovadia</div><div class="comment-action">Marked as resolved</div><div class="comment-content"></div><div class="created-date">Jun 26, 2020, 2:09 AM</div></div></div></div></div></div><div id="AAAAJzgsLAc" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 26, 2020, 12:10 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">Queue</div></div><div class="comment-content">Circular queue, backed by vec</div></div><div class="reply-list"></div></div></div><div id="AAAAJzgsLAY" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 26, 2020, 12:04 AM(edited: Jun 27, 2020, 6:39 AM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">&amp;#39;i</div></div><div class="comment-content">We do this to make &#39;i the default region for our function calls and new objects, like the List we make on the next line.</div></div><div class="reply-list"></div></div></div><div id="AAAAJzgsLAU" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 25, 2020, 10:45 PM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">;</div></div><div class="comment-content">Mutex takes a function which it will call to get its initial value.</div></div><div class="reply-list"></div></div></div><div id="AAAAJzgsLAQ" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 25, 2020, 10:34 PM(edited: Jul 22, 2020, 1:21 AM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">s</div></div><div class="comment-content">Stands for Abstract Syntax Tree, which is a simplified version of code, after we&#39;ve parsed it from the original text.</div></div><div class="reply-list"></div></div></div><div id="AAAAJzgsK_M" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 25, 2020, 8:52 PM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">!</div></div><div class="comment-content">They aint just for multi-threading anymore!</div></div><div class="reply-list"></div></div></div><div id="AAAAJzgsK-o" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 25, 2020, 8:48 PM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">pure</div></div><div class="comment-content">better name</div></div><div class="reply-list"></div></div></div><div id="AAAAJzgsK-g" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 25, 2020, 8:48 PM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">Pure</div></div><div class="comment-content">better name</div></div><div class="reply-list"></div></div></div><div id="AAAAJzgsK5Q" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 25, 2020, 8:11 PM(edited: Jun 27, 2020, 6:37 AM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">pure</div></div><div class="comment-content">pure means doesn&#39;t access any globals.</div></div><div class="reply-list"><div id="AAAAJzgsK-M" class="reply-box"><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="24" height="24" alt="Author profile image"></div><div class="reply-data"><div class="user-name">Evan Ovadia</div><div class="comment-content">We can also have pure functions without lifetime annotations.</div><div class="created-date">Jun 25, 2020, 8:44 PM(edited: Jun 27, 2020, 6:37 AM)</div></div></div></div></div></div><div id="AAAAJzgsK5I" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 25, 2020, 8:06 PM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">{</div></div><div class="comment-content">In this case, there&#39;s an implicit new region for this function (phrase better)</div></div><div class="reply-list"></div></div></div><div id="AAAAJzhMVEA" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 25, 2020, 4:34 PM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">)</div></div><div class="comment-content">This extra parentheses is also a shortcall. We&#39;re calling the 1-arg constructor for ?Impulse, which makes a Full.<br><br>This is equivalent to:<br>ret Full&lt;Desire&gt;(PursueDesire(60, this.unit, closest));</div></div><div class="reply-list"></div></div></div><div id="AAAAJzhMVD8" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 25, 2020, 4:21 PM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">()</div></div><div class="comment-content">This is a shortcall, which is calling the empty constructor for ?Impulse, which makes a Null.</div></div><div class="reply-list"></div></div></div><div id="AAAAJzhMVD4" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 25, 2020, 4:11 PM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">}</div></div><div class="comment-content">The _ means &quot;that argument&quot;.<br><br>This is equivalent to:<br>(a, b){ a.desire &lt; b.desire )<br><br>or in other languages:<br>(a, b) =&gt; a.desire &lt; b.desire</div></div><div class="reply-list"></div></div></div><div id="AAAAJuBT_lM" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 25, 2020, 6:38 AM(edited: Jun 27, 2020, 4:27 AM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">unsafety</div></div><div class="comment-content">Some applications choose to use Fast Mode which has zero overhead, and gain more confidence in its safety by developing and testing more in Normal Mode.<br><br>If we&#39;re looking for 100% certainty though, we must use Normal Mode or Resilient Mode.</div></div><div class="reply-list"></div></div></div><div id="AAAAJuBT_lI" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 25, 2020, 6:36 AM(edited: Jun 25, 2020, 4:12 PM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">*.</div></div><div class="comment-content">This is the &quot;map&quot; operator, it calls the method on the right on all the elements of the collection on the left.<br><br>It&#39;s equivalent to:<br>unit.capabilities.map( (c){ c.generateImpulse() } )<br><br>or in other languages:<br>unit.capabilites.map( c =&gt; c.generateImpulse() )</div></div><div class="reply-list"></div></div></div><div id="AAAAJuBT_lE" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 25, 2020, 6:35 AM</div><div class="comment-content">Need some actual designed syntax for bump regions</div></div><div class="reply-list"></div></div></div><div id="AAAAJuBT_lA" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 25, 2020, 6:34 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">impl</div></div><div class="comment-content">impl is like @Override in java.</div></div><div class="reply-list"></div></div></div><div id="AAAAJuBT_k8" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status">Resolved</div><div class="created-date">Jun 25, 2020, 6:34 AM(edited: Jun 25, 2020, 8:23 PM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">,</div></div><div class="comment-content">This function is taking in an argument from a regular region, and also two arguments from a read-only region.</div></div><div class="reply-list"><div id="AAAAJzgsK5g" class="reply-box"><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="24" height="24" alt="Author profile image"></div><div class="reply-data"><div class="user-name">Evan Ovadia</div><div class="comment-action">Marked as resolved</div><div class="comment-content"></div><div class="created-date">Jun 25, 2020, 8:23 PM</div></div></div></div></div></div><div id="AAAAJuBT_k4" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status">Resolved</div><div class="created-date">Jun 25, 2020, 6:32 AM(edited: Jun 25, 2020, 8:23 PM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">&amp;#39;r</div></div><div class="comment-content">These `&#39;r` annotations on `unit` and world`` inform the compiler that they are both from the region &#39;`r&#39;. The `&#39;r ro` informed the compiler that the `&#39;r` region is read-only.</div></div><div class="reply-list"><div id="AAAAJzgsK5c" class="reply-box"><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="24" height="24" alt="Author profile image"></div><div class="reply-data"><div class="user-name">Evan Ovadia</div><div class="comment-action">Marked as resolved</div><div class="comment-content"></div><div class="created-date">Jun 25, 2020, 8:23 PM</div></div></div></div></div></div><div id="AAAAJuBT_j0" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 25, 2020, 6:19 AM(edited: Jun 25, 2020, 6:25 AM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">strategy</div></div><div class="comment-content">Link to <a href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Memory_pool&amp;sa=D&amp;source=docs&amp;ust=1653194620371586&amp;usg=AOvVaw3YXN-9iVvboEP0FGrLnIxP" data-rawhref="https://en.wikipedia.org/wiki/Memory_pool" target="_blank">https://en.wikipedia.org/wiki/Memory_pool</a></div></div><div class="reply-list"><div id="AAAAJuBT_kI" class="reply-box"><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="24" height="24" alt="Author profile image"></div><div class="reply-data"><div class="user-name">Evan Ovadia</div><div class="comment-content">Also mention the other two strategies: normal and arena.</div><div class="created-date">Jun 25, 2020, 6:25 AM</div></div></div></div></div></div><div id="AAAAJuBT_js" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 25, 2020, 6:15 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">.</div></div><div class="comment-content">link meme to nights watch.</div></div><div class="reply-list"></div></div></div><div id="AAAAGqgXtCk" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status">Resolved</div><div class="created-date">Jun 24, 2020, 11:59 PM(edited: Jun 25, 2020, 5:43 AM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">.</div></div><div class="comment-content">talk about assert-on-use references here.</div></div><div class="reply-list"><div id="AAAAJuBT_ig" class="reply-box"><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="24" height="24" alt="Author profile image"></div><div class="reply-data"><div class="user-name">Evan Ovadia</div><div class="comment-action">Marked as resolved</div><div class="comment-content"></div><div class="created-date">Jun 25, 2020, 5:43 AM</div></div></div></div></div></div><div id="AAAAGqgXtCI" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 24, 2020, 10:48 PM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">.</div></div><div class="comment-content">It will feel familiar from C or C++: if you try to read or write from an object after it was deallocated, you&#39;ll probably crash.</div></div><div class="reply-list"></div></div></div><div id="AAAAGqgWKjA" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 24, 2020, 10:47 PM(edited: Jun 24, 2020, 10:54 PM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">!!</div></div><div class="comment-content">println(myWeakRef!!);<br>equivalent to:<br>mat myWeakRef {<br>  Full(r): println(r);<br>  Null(): panic();<br>}</div></div><div class="reply-list"></div></div></div><div id="AAAAGqgWKis" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 24, 2020, 9:39 PM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">.</div></div><div class="comment-content">Similar to C/C++ if asan is on.</div></div><div class="reply-list"></div></div></div><div id="AAAAGqgWKio" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status">Resolved</div><div class="created-date">Jun 24, 2020, 9:34 PM(edited: Jul 22, 2020, 1:22 AM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">.</div></div><div class="comment-content">(maybe talk about how we get speed, safety, and freedom. rust is speed and safety, but no freedom, and maybe not even speed sometimes because of the rc and indices overhead)</div></div><div class="reply-list"><div id="AAAAKAoHvUM" class="reply-box"><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="24" height="24" alt="Author profile image"></div><div class="reply-data"><div class="user-name">Evan Ovadia</div><div class="comment-action">Marked as resolved</div><div class="comment-content"></div><div class="created-date">Jul 22, 2020, 1:22 AM</div></div></div></div></div></div><div id="AAAAGqL2xoY" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 24, 2020, 6:09 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">l</div></div><div class="comment-content">Maybe we can also use an arena to reuse stuff?</div></div><div class="reply-list"></div></div></div><div id="AAAAGqL2xoU" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 24, 2020, 6:09 AM(edited: Jun 27, 2020, 6:38 AM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">n</div></div><div class="comment-content">There are some potential SIMD opportunities to parallelize these increments.</div></div><div class="reply-list"></div></div></div><div id="AAAAGqL2xoQ" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 24, 2020, 6:09 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">.</div></div><div class="comment-content">This is similar to the garbage collection tradeoff, without the nondeterminism. It also copies things out of the nursery.</div></div><div class="reply-list"></div></div></div><div id="AAAAGqL2xoM" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 24, 2020, 6:08 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">s</div></div><div class="comment-content">This is O(1), because we can leave breadcrumbs in the original bumped objects.</div></div><div class="reply-list"></div></div></div><div id="AAAAGqL2xoI" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 24, 2020, 6:02 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">t</div></div><div class="comment-content">There&#39;s also an if statement to get a new slab</div></div><div class="reply-list"></div></div></div><div id="AAAAGqL2xoE" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status">Resolved</div><div class="created-date">Jun 24, 2020, 5:37 AM(edited: Jun 25, 2020, 6:04 AM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">h</div></div><div class="comment-content">We also <i>heavily</i> coalesce and optimize out ref counts. Lobster found a way to optimize out 95% of them.</div></div><div class="reply-list"><div id="AAAAJuBT_iw" class="reply-box"><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="24" height="24" alt="Author profile image"></div><div class="reply-data"><div class="user-name">Evan Ovadia</div><div class="comment-action">Marked as resolved</div><div class="comment-content"></div><div class="created-date">Jun 25, 2020, 6:04 AM</div></div></div></div></div></div><div id="AAAAGqL2xoA" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 24, 2020, 5:36 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">e</div></div><div class="comment-content">Note that a lot of the time, the data is already in the cache. If it was made recently, or we&#39;re reading data from that struct anyway, we really aren&#39;t incurring any cost.</div></div><div class="reply-list"></div></div></div><div id="AAAAGqL2xn8" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status">Resolved</div><div class="created-date">Jun 24, 2020, 5:34 AM(edited: Jun 27, 2020, 5:05 AM)</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">.</div></div><div class="comment-content">&quot;Instructions are free, the new bottleneck in modern programming is data access.&quot;</div></div><div class="reply-list"><div id="AAAAJuLfcGI" class="reply-box"><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="24" height="24" alt="Author profile image"></div><div class="reply-data"><div class="user-name">Evan Ovadia</div><div class="comment-action">Marked as resolved</div><div class="comment-content"></div><div class="created-date">Jun 27, 2020, 5:05 AM</div></div></div></div></div></div><div id="AAAAGqL2xn4" class="comment"><div class="json">null</div><div class="author-picture"><img src="https://lh3.googleusercontent.com/a-/AOh14GjoOXwuji1Q0p6FX0IRu-PBtgN-CxWdF8wvbNemn1A=s50-c-k-no" width="48" height="48" alt="Author profile image"></div><div class="comment-data"><div class="comment-box"><div class="user-name">Evan Ovadia</div><div class="comment-status"></div><div class="created-date">Jun 24, 2020, 5:15 AM</div><div class="comment-context"><div class="comment-context-intro">Selected text:</div><div class="comment-context-value">overhead</div></div><div class="comment-content">&quot;for mutable objects; immutables are shared and so always have reference counting overhead.&quot;</div></div><div class="reply-list"></div></div></div></section></body></html>